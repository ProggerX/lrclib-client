-- Hoogle documentation, generated by Haddock
-- See Hoogle, http://www.haskell.org/hoogle/


-- | This library provides types and functions to interact with the LrcLib
--   API (<a>https://lrclib.net</a>), a community-driven lyrics database.
--   Supports fetching, searching, and submitting lyrics with proper
--   metadata.
@package lrclib-client
@version 0.1.0.0

module LrcLib.Types

-- | Monad for API actions that includes API url
type API = ReaderT Url IO

-- | Representation of API url
type Url = String

-- | Response when searching lyrics
type SearchResponse = [TrackData]

-- | Crypto proof-of-work challenge for publish
data Challenge
Challenge :: Text -> Text -> Challenge
[challengePrefix] :: Challenge -> Text
[challengeTarget] :: Challenge -> Text

-- | Response when getting lyrics
data GetResponse
NotFound :: GetResponse
OK :: TrackData -> GetResponse

-- | Track data that is accepted when getting lyrics
data TrackData
TrackData :: Integer -> Text -> Text -> Text -> Integer -> Bool -> Maybe Text -> Maybe Text -> TrackData
[trackId] :: TrackData -> Integer
[trackName] :: TrackData -> Text
[trackArtist] :: TrackData -> Text
[trackAlbum] :: TrackData -> Text
[trackDuration] :: TrackData -> Integer
[trackInstrumental] :: TrackData -> Bool
[trackPlainLyrics] :: TrackData -> Maybe Text
[trackSyncedLyrics] :: TrackData -> Maybe Text

-- | Query for search. Either text or track+artist+album
data SearchQuery
TextQuery :: Text -> SearchQuery
TrackQuery :: Text -> Maybe Text -> Maybe Text -> SearchQuery
[queryName] :: SearchQuery -> Text
[queryArtist] :: SearchQuery -> Maybe Text
[queryAlbum] :: SearchQuery -> Maybe Text

-- | Response when publishing lyrics
data PublishResponse
PublishOK :: PublishResponse
IncorrectToken :: PublishResponse

-- | Representation of request for publishing lyrics
data PublishRequest
PublishRequest :: Text -> Text -> Text -> Integer -> Maybe Text -> Maybe Text -> PublishRequest
[pubName] :: PublishRequest -> Text
[pubArtist] :: PublishRequest -> Text
[pubAlbum] :: PublishRequest -> Text
[pubDuration] :: PublishRequest -> Integer
[pubLyrics] :: PublishRequest -> Maybe Text
[pubSyncedLyrics] :: PublishRequest -> Maybe Text
instance Data.Aeson.Types.FromJSON.FromJSON LrcLib.Types.Challenge
instance Data.Aeson.Types.FromJSON.FromJSON LrcLib.Types.GetResponse
instance Data.Aeson.Types.FromJSON.FromJSON LrcLib.Types.TrackData
instance GHC.Internal.Generics.Generic LrcLib.Types.Challenge
instance GHC.Internal.Generics.Generic LrcLib.Types.GetResponse
instance GHC.Internal.Generics.Generic LrcLib.Types.PublishRequest
instance GHC.Internal.Generics.Generic LrcLib.Types.TrackData
instance GHC.Internal.Show.Show LrcLib.Types.GetResponse
instance GHC.Internal.Show.Show LrcLib.Types.TrackData
instance Data.Aeson.Types.ToJSON.ToJSON LrcLib.Types.PublishRequest

module LrcLib.Client

-- | Get lyrics by track name, artist, album and duration
getLyrics :: Text -> Text -> Text -> Integer -> API GetResponse

-- | getLyrics, but for cached lyrics.
getCachedLyrics :: Text -> Text -> Text -> Integer -> API GetResponse

-- | Get lyrics by id
getLyricsById :: Integer -> API GetResponse

-- | Request proof-of-work challenge for publish
requestChallenge :: API Challenge

-- | Search lyrics by either text query or track-artist-album
searchLyrics :: SearchQuery -> API SearchResponse

-- | Publish Lyrics (without requesting and solving challenge)
publish' :: Text -> PublishRequest -> API PublishResponse

-- | Solve proof-of-work challenge for publish
solveChallenge :: Challenge -> Text

-- | Publish Lyrics (request and solve challenge)
publish :: PublishRequest -> API PublishResponse

-- | Run API action with given API url
runAPI :: Url -> API a -> IO a

-- | Run API action with default API url
runDefaultAPI :: API a -> IO a
